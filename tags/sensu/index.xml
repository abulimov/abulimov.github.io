<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Sensu on Alexander Bulimov: Production Engineer and Scale Modeller</title>
    <link>//bulimov.me/tags/sensu/</link>
    <description>Recent content in Sensu on Alexander Bulimov: Production Engineer and Scale Modeller</description>
    <generator>Hugo</generator>
    <language>en-us</language>
    <lastBuildDate>Thu, 13 Nov 2014 00:00:00 +0000</lastBuildDate>
    <atom:link href="//bulimov.me/tags/sensu/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Удобная настройка Sensu с Ansible</title>
      <link>//bulimov.me/it/ansible-sensu/</link>
      <pubDate>Thu, 13 Nov 2014 00:00:00 +0000</pubDate>
      <guid>//bulimov.me/it/ansible-sensu/</guid>
      <description>&lt;p&gt;Так как я использую &lt;a href=&#34;http://sensuapp.org/&#34;&gt;Sensu&lt;/a&gt; для мониторинга,&#xA;и &lt;a href=&#34;http://www.ansible.com/&#34;&gt;Ansible&lt;/a&gt; для управления конфигурациями,&#xA;то конечно же я настраиваю Sensu с помощью Ansible.&lt;/p&gt;&#xA;&lt;p&gt;В этой связке меня смущало только одно - Sensu использует&#xA;&lt;a href=&#34;https://ru.wikipedia.org/wiki/JSON&#34;&gt;JSON&lt;/a&gt; для конфигов,&#xA;в то время как Ansible использует &lt;a href=&#34;https://ru.wikipedia.org/wiki/YAML&#34;&gt;YAML&lt;/a&gt;.&#xA;Поскольку JSON является подмножеством YAML, и описывать&#xA;конфигурации в YAML гораздо проще (никаких проблем с запятыми, скобочками),&#xA;хотелось писать в YAML и транслировать в JSON.&lt;/p&gt;&#xA;&lt;p&gt;Начал я, конечно, с использования шаблонов Ansible:&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;:::json&#xA;{&#xA;    &amp;quot;client&amp;quot;: {&#xA;        &amp;quot;address&amp;quot;: &amp;quot;{{ ansible_default_ipv4.address }}&amp;quot;,&#xA;        &amp;quot;name&amp;quot;: &amp;quot;{{ ansible_hostname }}&amp;quot;,&#xA;        &amp;quot;subscriptions&amp;quot;: [ &amp;quot;{{ sensu_client_subscriptions|join(&#39;&amp;quot;, &amp;quot;&#39;) }}&amp;quot; ]&#xA;    }&#xA;}&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;Вроде неплохо, но не слишком удобно, и если одним клиентам захочется добавить&#xA;что-то, например переменную &lt;code&gt;some_var&lt;/code&gt;, надо для них делать новый шаблон, или&#xA;городить строки такого вида:&lt;/p&gt;</description>
    </item>
    <item>
      <title>Переписал скрипты на Ruby для Sensu</title>
      <link>//bulimov.me/it/%D0%9F%D0%B5%D1%80%D0%B5%D0%BF%D0%B8%D1%81%D0%B0%D0%BB-%D1%81%D0%BA%D1%80%D0%B8%D0%BF%D1%82%D1%8B-%D0%BD%D0%B0-ruby-%D0%B4%D0%BB%D1%8F-sensu/</link>
      <pubDate>Thu, 04 Sep 2014 00:00:00 +0000</pubDate>
      <guid>//bulimov.me/it/%D0%9F%D0%B5%D1%80%D0%B5%D0%BF%D0%B8%D1%81%D0%B0%D0%BB-%D1%81%D0%BA%D1%80%D0%B8%D0%BF%D1%82%D1%8B-%D0%BD%D0%B0-ruby-%D0%B4%D0%BB%D1%8F-sensu/</guid>
      <description>&lt;p&gt;Поскольку я перевел мониторинг с Zabbix на Sensu, пришлось переписать&#xA;свои &lt;a href=&#34;//bulimov.me/it/%D0%9D%D0%B8%D0%B7%D0%BA%D0%BE%D1%83%D1%80%D0%BE%D0%B2%D0%BD%D0%B5%D0%B2%D0%BE%D0%B5-%D0%BE%D0%B1%D0%BD%D0%B0%D1%80%D1%83%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B2-zabbix-%D0%B8%D1%89%D0%B5%D0%BC-%D0%B4%D0%B8%D1%81%D0%BA%D0%B8-%D0%B2-%D0%BA%D0%BE%D0%BD%D1%82%D1%80%D0%BE%D0%BB%D0%BB%D0%B5%D1%80%D0%B5-%D0%BE%D1%82-3ware&#34;&gt;скрипты&lt;/a&gt; проверки состояния жестких дисков в raid-контроллерах от 3ware и&#xA;HP SmartArray для использования в Sensu. Ну а раз все равно переписывать - то&#xA;писать я решил на Ruby, чтобы можно было без проблем&#xA;заслать в &lt;a href=&#34;https://github.com/sensu/sensu-community-plugins&#34;&gt;Sensu-community-plugins&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;Скрипты весьма просты, так что проблем при переписывании никаких не было.&lt;/p&gt;&#xA;&lt;p&gt;Если кому надо - все уже отдано сообществу, теперь Sensu может мониторить&#xA;состояние дисков &lt;a href=&#34;https://github.com/sensu/sensu-community-plugins/blob/master/plugins/raid/check-3ware-status.rb&#34;&gt;в контроллерах от 3ware&lt;/a&gt;&#xA;и &lt;a href=&#34;https://github.com/sensu/sensu-community-plugins/blob/master/plugins/raid/check-smartarray-status.rb&#34;&gt;HP SmartArray&lt;/a&gt;.&lt;/p&gt;</description>
    </item>
    <item>
      <title>Monitoring sucks!</title>
      <link>//bulimov.me/it/monitoring-sucks/</link>
      <pubDate>Wed, 10 Jul 2013 00:00:00 +0000</pubDate>
      <guid>//bulimov.me/it/monitoring-sucks/</guid>
      <description>&lt;p&gt;&lt;strong&gt;TL;DR - тут я Sensu критиковал, но в 2014 году успешно заменил Zabbix на Sensu версии 0.12+&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;p&gt;В 2012 году появился в среде DevOps такой хештег, #monitoringsucks.&#xA;В сообщения с этим тегом devopsы писали, что текущее положение дел&#xA;в сфере мониторинга их не устраивает. Что именно - прекрасно иллюстрирует&#xA;&lt;a href=&#34;https://speakerdeck.com/obfuscurity/the-state-of-open-source-monitoring&#34;&gt;эта презентация&lt;/a&gt;&#xA;Если вкратце - хочется людям некоего стандарта API для взаимодействия между компонентами&#xA;утилит мониторинга, ну и появления самих этих компонент, чтоб из них строить&#xA;гибкий и умный мониторинг.&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
