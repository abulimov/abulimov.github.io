---
Title: Auto-backup конфигов активки через Rancid
Date: 2013-11-01
Tags:  [Rancid, Cisco, Juniper]
Categories: [IT, Russian]
Slug: auto-backup-конфигов-активки-через-rancid
Url: it/auto-backup-конфигов-активки-через-rancid
Build:
  List: local
---

На днях помогал коллеге с настройкой автоматического бекапа
для конфигураций нашей активки (Cisco, Juniper), и нашел
весьма интересное решение (похоже, вообще единственное) -
[rancid](http://www.shrubbery.net/rancid/).

Точнее, его форк [rancid-git](https://github.com/dotwaffle/rancid-git),
поскольку использую везде и всюду git, и ради бекапов городить CVS или
Subversion было бы неудобно.

Конечно, rancid этот - весьма оригинальный пример того, как с помощью
expect и bash-скриптов соорудить исправно работающее решение, отлично выполняющее
свою задачу. Если вкратце - оно по крону ходит через telnet/ssh по указанным хостам,
и с помощью expect запрашивает с них информацию + конфиги, а потом вывод кладет
в CVS/subversion/git. В итоге - получаем полную историю изменений конфигурации
и состоянии указанных устройств, в моем случае - в git. Причем rancid-git
умеет работать с удаленным репозиторием, при этом каждый коммит сопровождается push.

Я не буду тут приводить туториал а-ля Хабрахабр с пунктами типа git clone && make,
в репозитории rancid-git есть прекрасный readme, в котором по пунктам указано, как
собрать deb-пакет, а также что и для чего конфигурить.
Я просто порекомендую этот инструмент всем, кому хочется версионировать конфиги активки в автоматическом режиме.
