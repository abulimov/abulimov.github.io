Title: Впечатления от CoreOS
Date: 2015-07-29
Tags: CoreOS
Slug: coreos-opinion
Status: draft

На волне популярности контейнерной виртуализации [Docker](http://docker.com)
стали появляться специализированные дистрибутивы Linux, созданные специально
для использования как базовый хост для Docker-контейнеров.

Пионером среди них стал проект [CoreOS](http://coreos.com), затем появился
[Project Atomic](http://www.projectatomic.io/) от RedHat и
[Ubuntu Snappy](https://developer.ubuntu.com/en/snappy/).

Поскольку мы используем Docker, было логичным попробовать специализированный
дистрибутив для работы с ним, и выбор для этого эксперимента пал на
пионеров данного направления - CoreOS. Выбор этот был обусловен отчасти тем, что
в рамках проекта CoreOS было разработано несколько весьма интересных программ -
это **etcd** и **fleet**. Первый из них является распределенным хранилищем,
аналогом Consul, а второй представляет собой инструмент для оркестрации
кластера Docker-хостов путем распределения через etcd юнитов systemd.

В общем, на сайте и вдокументации все это выглядело весьма интересно, и я с
энтузиазмом ринулся осваивать новые технологии. Реальность же ожидаемо оказалась
весьма печальной - все описанное на сайте великолепие работало через раз, а
иногда и вообще не работало.

Чего стоит только fleet, который должен раскладывать по хостам юнит-файлы
systemd и следить за их статусом. Мало того, что он запускает эти сервисы
в блокируещем режиме, так что получить статус кластера в момент запуска
service-файла, который делает docker pull, невозможно, так банальный запуск
трех инстансов одного сервиса на кластере из трех машин закончился тем, что
один из этих трех сервисов остался в inactive состоянии, и вывести его из этой
комы мне не удалось даже многократным пересозданием и уничтожением этого сервиса.
