<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Попробуйте Packetbeat | Alexander Bulimov: Production Engineer and Scale Modeller</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    
  </head>

  <body>
    <nav>
    <ul class="menu">
      
      <li><a href="/">Home</a></li>
      
      <li><a href="/about/">About</a></li>
      
      <li><a href="https://models.bulimov.me">Scale Models</a></li>
      
      <li><a href="/categories/">Categories</a></li>
      
      <li><a href="/tags/">Tags</a></li>
      
      <li><a href="/reviews/">Reviews</a></li>
      
      <li><a href="/index.xml">Subscribe</a></li>
      
    </ul>
    <hr/>
    </nav>

<div class="article-meta">
<h1><span class="title">Попробуйте Packetbeat</span></h1>

<h2 class="date">2015/05/28</h2>

</div>

<main>
<p>Вчера в <a href="https://www.elastic.co/blog">блоге Elasticsearch</a> появилась отличная
новость - проект <a href="https://www.elastic.co/products/beats/packetbeat">Packetbeat</a>,
развиваемый до этого энтузиастами, присоединился к <a href="https://www.elastic.co">Elastic</a>.</p>
<p>Я уже довольно давно слежу за этим проектом, и теперь, когда можно не
беспокоиться о его будущем, хочу о нем рассказать.</p>
<p>Packetbeat это такой инструмент мониторинга, который работает как анализатор
сетевых пакетов, парсит различные протоколы (сейчас поддерживаются HTTP, MySQL,
PostgreSQL, Redis, Thrift-RPC), получает нужные данные, и отсылает их либо напрямую
в Elasticsearch, либо в Redis, из которого данные будет забирать Logstash и
класть их все в тот же Elasticsearch.</p>
<p>Поскольку парсится весь сетевой трафик, мы получаем полную картину взаимодействия
хостов и сервисов в нашей сети, а благодаря Elasticsearch и Kibana эту
информацию можно удобно обрабатывать и визуализировать.</p>
<p>Чем же это так круто? Да тем, что поставив Elasticsearch, Kibana и Packetbeat,
практически без какой-либо конфигурации, мы сразу видим ключевые метрики сервисов,
и получаем ответы на основные вопросы, например:</p>
<ul>
<li>сколько у нас вообще запросов к базе в минуту?</li>
<li>а какие из этих запросов к базе данных самые медленные?</li>
<li>каково соотношение select и insert/update запросов?</li>
<li>каковы процентили времени ответов базы данных?</li>
<li>какие у нас самые частые HTTP-запросы?</li>
<li>сколько у нас ошибок в ответах на HTTP-запросы?</li>
<li>как вообще у нас ходит трафик в системе web-база-кеш?</li>
</ul>
<p>Посмотреть все это великолепие живьем можно на
<a href="http://demo.elastic.co/packetbeat">демо-странице Packetbeat</a>.</p>
<p>Конечно, у этого подхода есть и минусы, главный из которых - производительность.
Packetbeat парсит сетевой трафик, и это недешевое удовольствие. Идеальным
вариантом работы для него является анализ трафика с помощью mirror ports на
сетевых устройствах, таким образом можно собирать информацию на отдельном сервере,
и Packetbeat не будет создавать нагрузки на сервер с наблюдаемым сервисом.</p>
<p>Если же это невозможно, Packetbeat умеет снифать трафик с сетевого
интерфейса хоста, причем разными способами - подробности
<a href="https://www.elastic.co/guide/en/beats/packetbeat/current/capturing-options.html">в документации</a>.</p>
<p>Я его именно в таком режиме использую, и весьма доволен - на средненьком сервере
с ~15k запросами к Postgres в минуту Packetbeat не создает значимой нагрузки на
производительность, и отлично все парсит.</p>
<p>В комплекте идут удобные дашборды для Kibana 4, так что процесс построения
мониторинга сделан максимально безболезненным.</p>
<p>В общем, попробуйте - это очень простой в развертывании и очень удобный и
наглядный инструмент мониторинга.</p>

</main>


<p class="terms">
<b>Tags:</b>

  <a href="//bulimov.me/tags/packetbeat/">Packetbeat</a>

  <a href="//bulimov.me/tags/elasticsearch/">Elasticsearch</a>

  <a href="//bulimov.me/tags/kibana/">Kibana</a>

  <a href="//bulimov.me/tags/monitoring/">Monitoring</a>


</p>
<p class="terms">

<b>Categories:</b>

  <a href="//bulimov.me/categories/it/">IT</a>

  <a href="//bulimov.me/categories/russian/">Russian</a>


</p>

  <footer>
  
  
  <hr/>
  <a href="https://creativecommons.org/licenses/by-sa/4.0/"><img src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" alt="License: CC BY-SA 4.0"></a> © <a href="http://bulimov.me">Alexander Bulimov</a> 2013 &ndash; 2022 | <a href="https://github.com/abulimov">Github</a>
  
  </footer>
  </body>
</html>

