<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Lyrics Tagger | Alexander Bulimov: Production Engineer and Scale Modeller</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    
  </head>

  <body>
    <nav>
    <ul class="menu">
      
      <li><a href="/">Home</a></li>
      
      <li><a href="/about/">About</a></li>
      
      <li><a href="https://models.bulimov.me">Scale Models</a></li>
      
      <li><a href="/categories/">Categories</a></li>
      
      <li><a href="/tags/">Tags</a></li>
      
      <li><a href="/reviews/">Reviews</a></li>
      
      <li><a href="/index.xml">Subscribe</a></li>
      
    </ul>
    <hr/>
    </nav>

<div class="article-meta">
<h1><span class="title">Lyrics Tagger</span></h1>

<h2 class="date">2014/11/25</h2>

</div>

<main>
<h2 id="предыстория">Предыстория</h2>
<p>Я езжу на работу в общественном транспорте, и слушаю там музыку
со смартфона. Достаточно часто хотелось почитать тексты прослушиваемых
в данный момент песен, но искать их в интернете было не слишком удобно,
да и вообще интернета до недавнего времени в метро не было.</p>
<p>Решение выглядит очевидным - надо встроить тексты песен в сами музыкальные файлы.
Благо, основные форматы это позволяют.
Музыку я храню во <a href="https://ru.wikipedia.org/wiki/FLAC">FLAC</a>, а на смартфон
закидываю в <a href="https://ru.wikipedia.org/wiki/Vorbis">Ogg Vorbis</a>.</p>
<p>Раз есть такая задача - значит можно ее решить с использованием программирования.
Быстрый поиск чего-то подходящего для моих целей ничего не дал, хотя многие плееры
умеют качать тексты песен по запросу.</p>
<p>Поскольку задача не показалась мне сложной, и простая консольная утилита полностью
покрыла бы мои потребности, я решил такую утилиту написать сам.</p>
<p>Выбрал я для реализации, конечно, Python. Все нужные библиотеки там уже были,
а именно:</p>
<ul>
<li><a href="https://pypi.python.org/pypi/mutagen">mutagen</a> для работы с музыкальными файлами;</li>
<li><a href="https://pypi.python.org/pypi/requests">requests</a> для получения нужных HTML-страниц;</li>
<li><a href="https://pypi.python.org/pypi/beautifulsoup4">beautifulsoup4</a> для разбора HTML;</li>
<li><a href="https://pypi.python.org/pypi/docopt">docopt</a> для удобного написания консольных утилит;</li>
<li><a href="https://pypi.python.org/pypi/mock">mock</a> для тестов.</li>
</ul>
<p>В итоге получилась вполне компактная программа, покрытая тестами, умеющая качать
тексты песен с <a href="http://lyrics.wikia.com/">lyrics.wikia.com</a> и записывать в теги
файлов в формате FLAC, Ogg, и MP3 (экспериментально, я MP3 практически на использую).
Модули для поддержки конкретных сайтов с текстами сделаны подключаемыми,
так что можно добавить скачивание с любого другого сайта, не меняя саму программу.</p>
<p>Результатами моих трудов может воспользоваться любой желающий,
<a href="https://github.com/abulimov/lyricstagger">код размещен на Github</a> под
лицензией <a href="http://opensource.org/licenses/MIT">MIT</a>.
Поддерживается Python версий 2.7, 3.2, 3.3, 3.4 и PyPy.</p>
<h2 id="установка">Установка</h2>
<p>Для установки достаточно выполнить следующую команду:</p>
<pre><code>::bash
pip install 'git+https://github.com/abulimov/lyricstagger#egg=lyricstagger'
</code></pre>
<h2 id="примеры-использования">Примеры использования</h2>
<p>Вывести список всех музыкальных файлов без встроенных текстов в директории ~/Music/</p>
<pre><code>::bash
user@machine:~$ lyricstagger report ~/Music
No lyrics in file '/home/user/Music/Some Artist/01 - Some Track.ogg'
No lyrics in file '/home/user/Music/Some Artist/02 - Other Track.ogg'
</code></pre>
<p>Скачать тесты и записать их в теги музыкальных файлов в директории ~/Music/</p>
<pre><code>::bash
user@machine:~$ lyricstagger tag ~/Music
</code></pre>
<p>Удалить все теги с текстами из всех музыкальных файлов в ~/Music/</p>
<pre><code>::bash
user@machine:~$ lyricstagger remove ~/Music
</code></pre>
<h2 id="итоги">Итоги</h2>
<p>Если вы встретились с подобной задачей - попробуйте <a href="https://github.com/abulimov/lyricstagger">lyricstagger</a>,
а если решили эту задачу более простым и удобным способом - напишите мне об этом.
Я уже натравил свою чудо-утилиту на всю музыкальную коллекцию, она записала все
найденные тексты в файлы, так что теперь я запускаю ее только когда покупаю новый
альбом на <a href="http://bandcamp.com">Bandcamp</a>, <a href="http://cdbaby.com">CDBaby</a> или <a href="http://qobuz.com">Qobuz</a>.</p>

</main>


<p class="terms">
<b>Tags:</b>

  <a href="//bulimov.me/tags/python/">Python</a>

  <a href="//bulimov.me/tags/%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5/">Программирование</a>


</p>
<p class="terms">

<b>Categories:</b>

  <a href="//bulimov.me/categories/it/">IT</a>

  <a href="//bulimov.me/categories/russian/">Russian</a>


</p>

  <footer>
  
  
  <hr/>
  <a href="https://creativecommons.org/licenses/by-sa/4.0/"><img src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" alt="License: CC BY-SA 4.0"></a> © <a href="http://bulimov.me">Alexander Bulimov</a> 2013 &ndash; 2025 | <a href="https://github.com/abulimov">Github</a>
  
  </footer>
  </body>
</html>

